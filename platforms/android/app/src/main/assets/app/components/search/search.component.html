<ActionBar class="action-bar" 
           [backgroundColor]="theme.darkGrey"
           [color]="theme.actionBarTextColor">
    <Label class="action-bar-title" text="Today's Happy Hours"></Label>
    <ActionItem tap="onFilter()"
                icon="res://filter"
                height="50%"
                width="50%"></ActionItem>
    <ActionItem [visibility]="listViewVisible ? 'visible' : 'collapsed'"
                (tap)="onListMapToggle()"
                icon="res://location"
                android.position="actionBar"></ActionItem>
    <ActionItem [visibility]="!listViewVisible ? 'visible' : 'collapsed'"
                (tap)="onListMapToggle()"
                icon="res://beenhere"
                android.position="actionBar"></ActionItem>
</ActionBar>
<Label
    [visibility]="debug.display.SearchComponent ? 'visible' : 'collapsed'"
    [text]="'Lat: ' + googleLocationService.userLocation?.latitude"
    color="#000"></Label>
<Label
    [visibility]="debug.display.SearchComponent ? 'visible' : 'collapsed'"
    [text]="'Lng: ' + googleLocationService.userLocation?.longitude"
    color="#000"></Label>
<!-- Loading Inidicator -->
<FlexboxLayout 
    [visibility]="(loadingFlag) ? 'visible' : 'collapsed'"
    [backgroundColor]="theme.primaryColor"
    height="100%"
    width="100%"
    alignItems="center">
    <FlexboxLayout 
        width="100%"
        alignItems="center"
        flexDirection="column">
        <ActivityIndicator 
            busy="true" 
            width="100" 
            height="100" 
            [color]="theme.accentColor"
            class="activity-indicator"></ActivityIndicator>
    </FlexboxLayout>
</FlexboxLayout>
<!-- Zero Results/Not Found Display -->
<FlexboxLayout 
    [visibility]="(searchStatusCode == 'ZERO_RESULTS' || searchStatusCode == 'NOT_FOUND') ? 'visible' : 'collapsed'"
    [backgroundColor]="theme.primaryColor"
    height="100%"
    width="100%"
    alignItems="center">
    <FlexboxLayout 
        width="100%"
        alignItems="center"
        flexDirection="column">
        <Label 
            text="No Results Found"
            fontSize="36"
            [color]="theme.accentColor"></Label>
        <Button 
            text="Refresh"
            fontSize="16"
            padding="20"
            margin="50"
            (tap)="refresh($event, 0)"
            class="btn btn-primary"></Button>
    </FlexboxLayout>
</FlexboxLayout>
<!-- Other Error Display -->
<FlexboxLayout 
    [visibility]="(searchStatusCode != 'ZERO_RESULTS' && searchStatusCode != 'OK') ? 'visible' : 'collapsed'"
    [backgroundColor]="theme.primaryColor"
    height="100%"
    width="100%"
    alignItems="center">
    <FlexboxLayout 
        width="100%"
        alignItems="center"
        flexDirection="column">
        <!-- OVER_QUERY_LIMIT -->
        <FlexboxLayout 
            flexDirection="row"
            [visibility]="searchStatusCode == 'OVER_QUERY_LIMIT' ? 'visible' : 'collapsed'">
            <Label 
                text="Too many requests have been made. Try again tomorrow."
                fontSize="36"
                [color]="theme.accentColor"></Label>
        </FlexboxLayout>
        <!-- REQUEST_DENIED -->
        <FlexboxLayout 
            flexDirection="row"
            [visibility]="searchStatusCode == 'REQUEST_DENIED' ? 'visible' : 'collapsed'">
            <Label 
                text="Too many requests have been made. Try again tomorrow."
                fontSize="36"
                [color]="theme.accentColor"></Label>
        </FlexboxLayout>
        <!-- INVALID_REQUEST -->
        <FlexboxLayout 
            flexDirection="row"
            [visibility]="searchStatusCode == 'INVALID_REQUEST' ? 'visible' : 'collapsed'">
            <Label 
                text="Your request is invalid. Please try again."
                fontSize="36"
                [color]="theme.accentColor"></Label>
            <Button 
                text="Retry"
                fontSize="16"
                padding="20"
                margin="50"
                (tap)="refresh($event, 0)"
                class="btn btn-primary"></Button>
        </FlexboxLayout>
        <!-- UNKNOWN_ERROR -->
        <FlexboxLayout 
            flexDirection="row"
            [visibility]="searchStatusCode == 'UNKNOWN_ERROR' ? 'visible' : 'collapsed'">
            <Label 
                text="An unknown error has occurred. Please try again."
                fontSize="36"
                [color]="theme.accentColor"></Label>
            <Button 
                text="Retry"
                fontSize="16"
                padding="20"
                margin="50"
                (tap)="refresh($event, 0)"
                class="btn btn-primary"></Button>
        </FlexboxLayout>
    </FlexboxLayout>
</FlexboxLayout>
<!-- OK Display -->
<RadListView 
    #vendorList
    [visibility]="(searchStatusCode == 'OK') ? 'visible' : 'collapsed'"
    [backgroundColor]="theme.primaryColor"
    [items]="vendors" 
    pullToRefresh="true" 
    [color]="theme.accentColor"
    (pullToRefreshInitiated)="refresh($event, 1)" 
    selectionBehavior="Press"
    (itemSelected)="onVendorTap($event)"
    multileSelection="false"
    loadOnDemandMode="Manual"
    (loadMoreDataRequested)="onLoadMoreItemsRequested($event)">
    <ng-template let-vendor="item" let-i="index">
        <vendor-listing [vendor]="vendor" [index]="index"></vendor-listing>
    </ng-template>
</RadListView>




