"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var element_registry_1 = require("nativescript-angular/element-registry");
var settings_1 = require("../../../../../settings");
var nativescript_google_maps_sdk_1 = require("nativescript-google-maps-sdk");
element_registry_1.registerElement('MapView', function () { return nativescript_google_maps_sdk_1.MapView; });
var VendorMapComponent = (function () {
    function VendorMapComponent() {
        this.zoom = 16;
        this.minZoom = 0;
        this.maxZoom = 22;
        this.bearing = 0;
        this.tilt = 0;
        this.theme = settings_1.Theme;
    }
    VendorMapComponent.prototype.ngOnInit = function () {
        console.log('VendorMapComonent.ngOnInit() Vendor Location: ' + JSON.stringify(this.vendor.result.geometry));
    };
    VendorMapComponent.prototype.onMapReady = function (event) {
        console.log("Map Ready");
        this.mapView = event.object;
        this.mapView.settings.tiltGesturesEnabled = false;
        this.mapView.settings.myLocationButtonEnabled = false;
        this.mapView.settings.compassEnabled = false;
        this.bounds = nativescript_google_maps_sdk_1.Bounds.fromCoordinates(nativescript_google_maps_sdk_1.Position.positionFromLatLng(this.vendor.result.geometry.viewport.southwest.lat, this.vendor.result.geometry.viewport.southwest.lng), nativescript_google_maps_sdk_1.Position.positionFromLatLng(this.vendor.result.geometry.viewport.northeast.lat, this.vendor.result.geometry.viewport.northeast.lng));
        this.mapView.setViewport(this.bounds);
        this.mapView.latitude = this.vendor.result.geometry.location.lat;
        this.mapView.longitude = this.vendor.result.geometry.location.lng;
        this.mapView.zoom = this.zoom;
        console.log('MapView Location: Lat: ' + this.mapView.latitude + ' Lng: ' + this.mapView.longitude);
        var marker = new nativescript_google_maps_sdk_1.Marker();
        marker.position = nativescript_google_maps_sdk_1.Position.positionFromLatLng(this.vendor.result.geometry.location.lat, this.vendor.result.geometry.location.lng);
        marker.title = "Title Test";
        marker.snippet = "Snippet Test";
        //marker.userData = {index: 1};
        this.mapView.addMarker(marker);
    };
    ;
    VendorMapComponent.prototype.onMarkerEvent = function (args) {
        console.log("Marker Event: '" + args.eventName
            + "' triggered on: " + args.marker.title
            + ", Lat: " + args.marker.position.latitude + ", Lon: " + args.marker.position.longitude, args);
    };
    VendorMapComponent.prototype.onCoordinateTapped = function (args) {
        console.log("Coordinate Tapped, Lat: " + args.position.latitude + ", Lon: " + args.position.longitude, args);
    };
    VendorMapComponent.prototype.onCameraChanged = function (args) {
        console.log("Camera changed: " + JSON.stringify(args.camera), JSON.stringify(args.camera) === this.lastCamera);
        this.lastCamera = JSON.stringify(args.camera);
    };
    __decorate([
        core_1.ViewChild("mapView"),
        __metadata("design:type", nativescript_google_maps_sdk_1.MapView)
    ], VendorMapComponent.prototype, "mapView", void 0);
    __decorate([
        core_1.Input(),
        __metadata("design:type", Object)
    ], VendorMapComponent.prototype, "vendor", void 0);
    VendorMapComponent = __decorate([
        core_1.Component({
            selector: 'vendor-map',
            templateUrl: './components/search/vendor-detail/vendor-tab-map/vendor-map/vendor-map.component.html'
        }),
        __metadata("design:paramtypes", [])
    ], VendorMapComponent);
    return VendorMapComponent;
}());
exports.VendorMapComponent = VendorMapComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9yLW1hcC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ2ZW5kb3ItbWFwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHNDQUFnRjtBQUNoRiwwRUFBd0U7QUFFeEUsb0RBQWdEO0FBQ2hELDZFQUFpRjtBQUVqRixrQ0FBZSxDQUFDLFNBQVMsRUFBRSxjQUFNLE9BQUEsc0NBQU8sRUFBUCxDQUFPLENBQUMsQ0FBQztBQU0xQztJQWlCRTtRQVRPLFNBQUksR0FBVyxFQUFFLENBQUM7UUFDbEIsWUFBTyxHQUFXLENBQUMsQ0FBQztRQUNwQixZQUFPLEdBQVcsRUFBRSxDQUFDO1FBQ3JCLFlBQU8sR0FBVyxDQUFDLENBQUM7UUFDcEIsU0FBSSxHQUFXLENBQUMsQ0FBQztRQU10QixJQUFJLENBQUMsS0FBSyxHQUFHLGdCQUFLLENBQUM7SUFDckIsQ0FBQztJQUVELHFDQUFRLEdBQVI7UUFDRSxPQUFPLENBQUMsR0FBRyxDQUFDLGdEQUFnRCxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUM5RyxDQUFDO0lBRUQsdUNBQVUsR0FBVixVQUFZLEtBQUs7UUFDZixPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxPQUFPLEdBQWEsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUN0QyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsR0FBRyxLQUFLLENBQUM7UUFDbEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsdUJBQXVCLEdBQUcsS0FBSyxDQUFDO1FBQ3RELElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDN0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxxQ0FBTSxDQUFDLGVBQWUsQ0FDbEMsdUNBQVEs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QUNsRCxDQUFDO0lBakV1QjtRQUFyQixnQkFBUyxDQUFDLFNBQVMsQ0FBQztrQ0FBVSxzQ0FBTzt1REFBQztJQUU5QjtRQUFSLFlBQUssRUFBRTs7c0RBQXNCO0lBSG5CLGtCQUFrQjtRQUo5QixnQkFBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLFlBQVk7WUFDdEIsV0FBVyxFQUFFLHVGQUF1RjtTQUNyRyxDQUFDOztPQUNXLGtCQUFrQixDQXFJOUI7SUFBRCx5QkFBQztDQUFBLEFBcklELElBcUlDO0FBcklZLGdEQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRWxlbWVudFJlZiwgVmlld0NoaWxkLCBPbkluaXQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IHJlZ2lzdGVyRWxlbWVudCB9IGZyb20gXCJuYXRpdmVzY3JpcHQtYW5ndWxhci9lbGVtZW50LXJlZ2lzdHJ5XCI7XHJcbmltcG9ydCB7IFZlbmRvckRldGFpbCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2ludGVyZmFjZXMvc2VhcmNoLXJlc3VsdC92ZW5kb3ItZGV0YWlsL3ZlbmRvci1kZXRhaWwuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgVGhlbWUgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IE1hcFZpZXcsIE1hcmtlciwgUG9zaXRpb24sIEJvdW5kcyB9IGZyb20gJ25hdGl2ZXNjcmlwdC1nb29nbGUtbWFwcy1zZGsnO1xyXG5cclxucmVnaXN0ZXJFbGVtZW50KCdNYXBWaWV3JywgKCkgPT4gTWFwVmlldyk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3ZlbmRvci1tYXAnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9jb21wb25lbnRzL3NlYXJjaC92ZW5kb3ItZGV0YWlsL3ZlbmRvci10YWItbWFwL3ZlbmRvci1tYXAvdmVuZG9yLW1hcC5jb21wb25lbnQuaHRtbCdcclxufSlcclxuZXhwb3J0IGNsYXNzIFZlbmRvck1hcENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgQFZpZXdDaGlsZChcIm1hcFZpZXdcIikgbWFwVmlldzogTWFwVmlldztcclxuICBcclxuICBASW5wdXQoKSB2ZW5kb3I6IFZlbmRvckRldGFpbDtcclxuXHJcbiAgcHVibGljIHRoZW1lO1xyXG4gIHB1YmxpYyBsYXRpdHVkZTogbnVtYmVyO1xyXG4gIHB1YmxpYyBsb25naXR1ZGU6IG51bWJlcjtcclxuICBwdWJsaWMgem9vbTogbnVtYmVyID0gMTY7XHJcbiAgcHVibGljIG1pblpvb206IG51bWJlciA9IDA7XHJcbiAgcHVibGljIG1heFpvb206IG51bWJlciA9IDIyO1xyXG4gIHB1YmxpYyBiZWFyaW5nOiBudW1iZXIgPSAwO1xyXG4gIHB1YmxpYyB0aWx0OiBudW1iZXIgPSAwO1xyXG4gIHB1YmxpYyBsYXN0Q2FtZXJhOiBzdHJpbmc7XHJcbiAgXHJcbiAgcHJpdmF0ZSBib3VuZHM6IEJvdW5kcztcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnRoZW1lID0gVGhlbWU7XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpe1xyXG4gICAgY29uc29sZS5sb2coJ1ZlbmRvck1hcENvbW9uZW50Lm5nT25Jbml0KCkgVmVuZG9yIExvY2F0aW9uOiAnICsgSlNPTi5zdHJpbmdpZnkodGhpcy52ZW5kb3IucmVzdWx0Lmdlb21ldHJ5KSk7XHJcbiAgfVxyXG5cclxuICBvbk1hcFJlYWR5IChldmVudCkge1xyXG4gICAgY29uc29sZS5sb2coXCJNYXAgUmVhZHlcIik7XHJcbiAgICB0aGlzLm1hcFZpZXcgPSA8TWFwVmlldz4gZXZlbnQub2JqZWN0O1xyXG4gICAgdGhpcy5tYXBWaWV3LnNldHRpbmdzLnRpbHRHZXN0dXJlc0VuYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMubWFwVmlldy5zZXR0aW5ncy5teUxvY2F0aW9uQnV0dG9uRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5tYXBWaWV3LnNldHRpbmdzLmNvbXBhc3NFbmFibGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmJvdW5kcyA9IEJvdW5kcy5mcm9tQ29vcmRpbmF0ZXMoXHJcbiAgICAgIFBvc2l0aW9uLnBvc2l0aW9uRnJvbUxhdExuZyh0aGlzLnZlbmRvci5yZXN1bHQuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgdGhpcy52ZW5kb3IucmVzdWx0Lmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmcpLFxyXG4gICAgICBQb3NpdGlvbi5wb3NpdGlvbkZyb21MYXRMbmcodGhpcy52ZW5kb3IucmVzdWx0Lmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHRoaXMudmVuZG9yLnJlc3VsdC5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubG5nKVxyXG4gICAgKTtcclxuICAgIHRoaXMubWFwVmlldy5zZXRWaWV3cG9ydCh0aGlzLmJvdW5kcylcclxuICAgIHRoaXMubWFwVmlldy5sYXRpdHVkZSA9IHRoaXMudmVuZG9yLnJlc3VsdC5nZW9tZXRyeS5sb2NhdGlvbi5sYXQ7XHJcbiAgICB0aGlzLm1hcFZpZXcubG9uZ2l0dWRlID0gdGhpcy52ZW5kb3IucmVzdWx0Lmdlb21ldHJ5LmxvY2F0aW9uLmxuZztcclxuICAgIHRoaXMubWFwVmlldy56b29tID0gdGhpcy56b29tO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCdNYXBWaWV3IExvY2F0aW9uOiBMYXQ6ICcgKyB0aGlzLm1hcFZpZXcubGF0aXR1ZGUgKyAnIExuZzogJyArIHRoaXMubWFwVmlldy5sb25naXR1ZGUpO1xyXG4gICAgbGV0IG1hcmtlciA9IG5ldyBNYXJrZXIoKTtcclxuICAgIG1hcmtlci5wb3NpdGlvbiA9IFBvc2l0aW9uLnBvc2l0aW9uRnJvbUxhdExuZyh0aGlzLnZlbmRvci5yZXN1bHQuZ2VvbWV0cnkubG9jYXRpb24ubGF0LCB0aGlzLnZlbmRvci5yZXN1bHQuZ2VvbWV0cnkubG9jYXRpb24ubG5nKTtcclxuICAgIG1hcmtlci50aXRsZSA9IFwiVGl0bGUgVGVzdFwiXHJcbiAgICBtYXJrZXIuc25pcHBldCA9IFwiU25pcHBldCBUZXN0XCI7XHJcbiAgLy9tYXJrZXIudXNlckRhdGEgPSB7aW5kZXg6IDF9O1xyXG4gICAgdGhpcy5tYXBWaWV3LmFkZE1hcmtlcihtYXJrZXIpO1xyXG4gICAgXHJcblxyXG4gIH07XHJcblxyXG4gXHJcblxyXG4gIG9uTWFya2VyRXZlbnQoYXJncykge1xyXG4gICAgY29uc29sZS5sb2coXCJNYXJrZXIgRXZlbnQ6ICdcIiArIGFyZ3MuZXZlbnROYW1lXHJcbiAgICAgICAgKyBcIicgdHJpZ2dlcmVkIG9uOiBcIiArIGFyZ3MubWFya2VyLnRpdGxlXHJcbiAgICAgICAgKyBcIiwgTGF0OiBcIiArIGFyZ3MubWFya2VyLnBvc2l0aW9uLmxhdGl0dWRlICsgXCIsIExvbjogXCIgKyBhcmdzLm1hcmtlci5wb3NpdGlvbi5sb25naXR1ZGUsIGFyZ3MpO1xyXG4gIH1cclxuXHJcbiAgb25Db29yZGluYXRlVGFwcGVkKGFyZ3MpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQ29vcmRpbmF0ZSBUYXBwZWQsIExhdDogXCIgKyBhcmdzLnBvc2l0aW9uLmxhdGl0dWRlICsgXCIsIExvbjogXCIgKyBhcmdzLnBvc2l0aW9uLmxvbmdpdHVkZSwgYXJncyk7XHJcbiAgfVxyXG5cclxuICBvbkNhbWVyYUNoYW5nZWQoYXJncykge1xyXG4gICAgY29uc29sZS5sb2coXCJDYW1lcmEgY2hhbmdlZDogXCIgKyBKU09OLnN0cmluZ2lmeShhcmdzLmNhbWVyYSksIEpTT04uc3RyaW5naWZ5KGFyZ3MuY2FtZXJhKSA9PT0gdGhpcy5sYXN0Q2FtZXJhKTtcclxuICAgIHRoaXMubGFzdENhbWVyYSA9IEpTT04uc3RyaW5naWZ5KGFyZ3MuY2FtZXJhKTtcclxufVxyXG5cclxuLy8gKioqKioqIE1hcHMgRGVtbyBDb2RlICoqKioqKiAvL1xyXG5cclxuLy8gICBwdWJsaWMgb25NYXBSZWFkeSA9IChldmVudCkgPT4ge1xyXG4vLyAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbi8vICAgICAgICAgLy9hbGVydCh0aGlzLmhlYXRNYXApO1xyXG4vLyAgICAgfSwgMTAwMDApO1xyXG4vLyAgICAgdmFyIG1vZGVsID0gbmV3IE1hcENvbXBvbmVudCh0aGlzLnBhZ2UsIHRoaXMuaHR0cFNlcnZpY2UpO1xyXG4vLyAgICAgbGV0IG1hcFZpZXcgPSBldmVudC5vYmplY3Q7XHJcbi8vICAgICB0aGlzLm1hcFZpZXcgPSBtYXBWaWV3O1xyXG4vLyAgICAgLy9sZXQgcG9seSA9IG5ldyBQb2x5Z29uKCk7XHJcbi8vICAgICAvL3ZhciBwb29vb2x5ID0gW1xyXG4vLyAgICAgLy8gICAgUG9zaXRpb24ucG9zaXRpb25Gcm9tTGF0TG5nKDQwLjE2MDgwNzMwMTQ2NDg4NSwgLTgzLjAwODc5NTM4MDU5MjI5KSxcclxuLy8gICAgIC8vICAgIFBvc2l0aW9uLnBvc2l0aW9uRnJvbUxhdExuZyg0MC4xNjA1MDE4NzM5Njc4NDYsIC04My4wMDg3NzEyNDA3MTExNiksXHJcbi8vICAgICAvLyAgICBQb3NpdGlvbi5wb3NpdGlvbkZyb21MYXRMbmcoNDAuMTYwNDg5NTc0ODQ1MiwgLTgzLjAwODY0NTE3Njg4NzQ2KSxcclxuLy8gICAgIC8vICAgIFBvc2l0aW9uLnBvc2l0aW9uRnJvbUxhdExuZyg0MC4xNjA4MTI0MjYwNzU2MSwgLTgzLjAwODY2NjYzNDU1OTYzKSxcclxuLy8gICAgIC8vICAgIFBvc2l0aW9uLnBvc2l0aW9uRnJvbUxhdExuZyg0MC4xNjA4MDczMDE0NjQ4ODUsIC04My4wMDg3OTUzODA1OTIyOSlcclxuICAgICAgICBcclxuLy8gICAgIC8vXTtcclxuLy8gICAgIC8vcG9seS5hZGRQb2ludHMocG9vb29seSk7XHJcbi8vICAgICAvL3BvbHkuZmlsbENvbG9yID0gbmV3IENvbG9yKFwiI0ZGOTgwMFwiKTtcclxuLy8gICAgIC8vcG9seS5zdHJva2VDb2xvciA9IG5ldyBDb2xvcihcIiMwMDdEQzNcIik7XHJcbi8vICAgICAvL3BvbHkuc3Ryb2tlV2lkdGggPSAyO1xyXG4vLyAgICAgLy9wb2x5LnZpc2libGUgPSB0cnVlO1xyXG4vLyAgICAgLy9tYXBWaWV3LmFkZFBvbHlnb24ocG9seSk7XHJcbi8vICAgICBjb25zb2xlLmxvZyhBY2N1cmFjeS5oaWdoKVxyXG4vLyAgICAgLy9jb25zb2xlLmxvZygndGVzdCcpO1xyXG4vLyAgICAgdmFyIG1hcmtlciA9IG5ldyBtYXBzTW9kdWxlLk1hcmtlcigpO1xyXG4vLyAgICAgLy9jb25zb2xlLmxvZyhtYXBWaWV3KTtcclxuLy8gICAgIG1hcmtlci50aXRsZSA9IFwibWFya2VyMVwiO1xyXG4vLyAgICAgbWFya2VyLnBvc2l0aW9uID0gbWFwc01vZHVsZS5Qb3NpdGlvbi5wb3NpdGlvbkZyb21MYXRMbmcodGhpcy5wb2ludDEubGF0aXR1ZGUsIHRoaXMucG9pbnQxLmxvbmdpdHVkZSk7XHJcbi8vICAgICBtYXJrZXIudXNlckRhdGEgPSB7IGluZGV4OiAxIH07XHJcbi8vICAgICBtYXBWaWV3LmFkZE1hcmtlcihtYXJrZXIpO1xyXG5cclxuLy8gICAgIC8vdGhpcy5hZGRIZWF0KCk7XHJcbi8vICAgICB2YXIgbG9jYXRpb24gPSBnZW9sb2NhdGlvbi5nZXRDdXJyZW50TG9jYXRpb24oeyBkZXNpcmVkQWNjdXJhY3k6IEFjY3VyYWN5LmhpZ2gsIHVwZGF0ZURpc3RhbmNlOiAwLjEsIG1heGltdW1BZ2U6IDUwMDAsIHRpbWVvdXQ6IDIwMDAwIH0pLlxyXG4vLyAgICAgICAgIHRoZW4oKGxvYykgPT4ge1xyXG4vLyAgICAgICAgICAgICBpZiAobG9jKSB7XHJcbi8vICAgICAgICAgICAgICAgICBtb2RlbC5sb2NhdGlvbnMucHVzaChsb2MpO1xyXG4vLyAgICAgICAgICAgICAgICAgLy9hbGVydChKU09OLnN0cmluZ2lmeShsb2MpKTtcclxuLy8gICAgICAgICAgICAgICAgIC8vIFdyaXRpbmcgdGV4dCB0byB0aGUgZmlsZS5cclxuLy8gICAgICAgICAgICAgICAgIGxldCB0ZW1wTWFya2VyID0geyBsYXRpdHVkZTogbG9jLmxhdGl0dWRlLCBsb25naXR1ZGU6IGxvYy5sb25naXR1ZGUsIHRpdGxlOiAnbWUnIH07XHJcbiAgICAgICAgICAgICAgICBcclxuLy8gICAgICAgICAgICAgICAgIC8vYWxlcnQoSlNPTi5zdHJpbmdpZnkodGVtcE1hcmtlcikpXHJcbi8vICAgICAgICAgICAgICAgICB0aGlzLm1hcmtlcnMucHVzaCh0ZW1wTWFya2VyKTtcclxuLy8gICAgICAgICAgICAgICAgIC8vYWxlcnQoSlNPTi5zdHJpbmdpZnkodGhpcy5tYXJrZXJzKSlcclxuLy8gICAgICAgICAgICAgICAgdmFyIG1hcmtlcjIgPSBuZXcgbWFwc01vZHVsZS5NYXJrZXIoKTtcclxuLy8gICAgICAgICAgICAgICAgIG1hcmtlcjIudGl0bGUgPSBcIm1lXCI7XHJcbi8vICAgICAgICAgICAgICAgICBtYXJrZXIyLnBvc2l0aW9uID0gbWFwc01vZHVsZS5Qb3NpdGlvbi5wb3NpdGlvbkZyb21MYXRMbmcobG9jLmxhdGl0dWRlLCBsb2MubG9uZ2l0dWRlKTtcclxuLy8gICAgICAgICAgICAgICAgIG1hcmtlcjIudXNlckRhdGEgPSB7IGluZGV4OiAxIH07XHJcbi8vICAgICAgICAgICAgICAgICBtYXBWaWV3LmFkZE1hcmtlcihtYXJrZXIyKTtcclxuICAgICAgICAgICAgICAgIFxyXG4vLyAgICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKVxyXG4vLyAgICAgICAgICAgICAgICAgLy9hbGVydCh0aGlzLm1hcmtlcnMpXHJcbi8vICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGlyKHRoaXMubWFya2VycylcclxuLy8gICAgICAgICAgICAgICAgIC8vY29uc29sZS5kaXIoT2JqZWN0LmtleXMobWFwVmlldykpXHJcbi8vICAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGlyKG1hcFZpZXcuX21hcmtlcnMpXHJcbi8vICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlci5oaWRlKCk7XHJcbi8vICAgICAgICAgICAgICAgICB0aGlzLndhdGNoTG9jYXRpb24obW9kZWwsIG1hcFZpZXcpO1xyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcclxuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciEhISEhISExOiBcIiArIGUubWVzc2FnZSk7XHJcbi8vICAgICAgICAgICAgIHRoaXMub25NYXBSZWFkeShldmVudCk7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcclxuLy8gfTtcclxufSJdfQ==